// 章节识别正则表达式
export const CHAPTER_REGEX = /^[一二三四五六七八九十百千万]+[\s、]+.*|^(?:0*[1-9]\d*)(?:\s*[｜|].*|\s+.*|[^\s\d｜|].*|$)|^(第\s*\d+\s*[章回部卷集节].*|第\s*[零一二三四五六七八九十百千万]+\s*[章回部卷集节].*|Chapter\s*\d+.*|序章|尾声|后记|前言|正文|终章|番外|楔子)$|^[☆★✦✧].{1,30}$|^\d+\s+[☪☆★✦✧◆◇▲△▼▽■□●○].*|^(?:(?:内容|文章)?简介|文案|楔子|正文(?!完|结)|终章|番外)\s*$|◎([^◎]+)◎|===([^=]+)===|^[\(（]\d+[\)）].*|^[\(（\[［〔][一二三四五六七八九十百千万]+[\)）\]］〕].*|^[\(（\[［〔]第[一二三四五六七八九十百千万]+[章节回部卷集][\)）\]］〕].*|^卷[一二三四五六七八九十百千万]+.*|^第[一二三四五六七八九十百千万]+卷.*|^卷\d+.*|^第\d+卷.*|^番[一二三四五六七八九十百千万]+.*|^番\d+.*/;

// 引号字符（用于排除以引号开头的行被误识别为章节标题）
export const QUOTE_CHARS = /^[""\"""「」『』''']|[""\"""「」『』''']$/;

// 日期格式正则（用于排除）
export const DATE_REGEX = /^\d{4}[-\/年]\d{1,2}[-\/月]\d{1,2}|^\d{1,2}[-\/月]\d{1,2}/;

// 最大标题长度
export const MAX_TITLE_LENGTH = 40;

// 章节标题前缀长度限制（标题前允许的最大字符数）
export const TITLE_PREFIX_LENGTH = 5;

// 短章节合并阈值（字数）
export const MIN_CHAPTER_LENGTH = 300;

// EPUB 样式配置
export const EPUB_STYLES = {
  // TXT转换时的样式
  txt: {
    paragraphIndent: '2em',
    titleSize: '1.4em',
    chapterMarginTop: '1em',
    chapterMarginBottom: '1em',
    pageMargin: '0em',
    lineHeight: '1.5',
    paragraphSpacing: '0',
    removeEmptyLines: true,
    textAlign: 'justify',
    titleAlign: 'left',
    titleBold: true,
    tocItemSpacing: '0.2em',
  },
  // EPUB调整时的样式
  epub: {
    lineHeight: '1.4',
    paragraphSpacing: '0.5em',
  }
};

// 文件名清理正则（Z-Library 各种变体）
export const FILENAME_CLEANUP_REGEX = /[\s_]*[\(\[（【]?Z[-_]?Library[\)\]）】]?\s*/gi;

// 书名作者提取正则（从文件名）
// 注意：顺序很重要，更具体的模式放前面
export const BOOK_INFO_PATTERNS = [
  // === 带书名号的格式 ===
  // 《书名》作者：作者名 或 《书名》作者:作者名
  /^《(.+?)》\s*作者[：:]\s*(.+?)$/,
  // 《书名》著：作者 / 文：作者 / 著:作者
  /^《(.+?)》\s*[著文][：:]\s*(.+?)$/,
  // 《书名》by作者（by前后空格可选）
  /^《(.+?)》\s*by\s*(.+?)$/i,
  // 《书名》（作者）或《书名》(作者) 或《书名》[作者] 或《书名》【作者】
  /^《(.+?)》\s*[（(【\[](.+?)[）)】\]]$/,
  // 《书名》 作者（空格分隔，作者不含特殊字符）
  /^《(.+?)》\s+([^erta\s][^\s（(【\[]*?)$/,
  // 《书名》（仅书名）
  /^《(.+?)》$/,

  // === 作者在前的格式 ===
  // 作者《书名》
  /^(.+?)《(.+?)》$/,

  // === 不带书名号的格式 ===
  // 书名 作者：作者名 / 著：作者 / 文：作者
  /^(.+?)\s+(?:作者|著|文)[：:]\s*(.+?)$/,
  // 书名 by 作者（by两边必须有空格，避免误匹配含by的书名）
  /^(.+?)\s+by\s+(.+?)$/i,
  // 书名（作者）或 书名(作者) 或 书名[作者] 或 书名【作者】
  /^(.+?)\s*[（(【\[]([^）)】\]]+)[）)】\]]$/,
  // 书名 - 作者 / 书名－作者 / 书名—作者 / 书名——作者（各种横线）
  /^(.+?)\s*[-–—－―]+\s*(.+?)$/,
  // 书名_作者
  /^(.+?)_(.+?)$/,
  // 书名.作者（点分隔，但要避免匹配扩展名）
  /^(.+?)\.([^.]+?)$/,
  // 书名+作者
  /^(.+?)\+(.+?)$/,
];

// 内容中提取书名作者的正则
export const CONTENT_INFO_PATTERNS = [
  /书\s*名[：:]\s*(.+)/,
  /作\s*者[：:]\s*(.+)/,
  /Title[：:]\s*(.+)/i,
  /Author[：:]\s*(.+)/i,
];
